.container-fluid
  .row
    .col.text-center.mt-5
      .display-1.fw-bolder.text-warning(x-text="$store.loc.pageRooms.title")
  .row.py-5
    .col.d-flex.flex-column
      .semitransparent-container.container-fluid(x-data="roomsList")
        .row.justify-content-end
          .col-auto
            button.btn.btn-sm.btn-outline-warning
              i.bi.bi-arrow-repeat(aria-hidden="true")
          .col-auto.ps-0
            .dropdown-center
              button.btn.btn-warning.btn-sm.fw-bold(
                type="button",
                data-bs-toggle="dropdown",
                aria-expanded="false",
                data-bs-auto-close="outside"
              )
                i.bi.bi-door-open-fill
                span.ms-1(x-text="$store.loc.pageRooms.actions.join.button")
              form.dropdown-menu.p-3.mt-1.shadow-lg.bg-warning-subtle.bg-gradient(
                style="width: 300px",
                x-data="joinPrivateRoom",
                x-id="['roomId', 'password']",
                @submit.prevent="join()"
              )
                h5.mb-2(x-text="$store.loc.pageRooms.actions.join.title")
                .mb-3
                  input.field(
                    type="roomId",
                    placeholder=" ",
                    x-model="roomId",
                    :id="$id('roomId')"
                  )
                  label(
                    :for="$id('roomId')",
                    x-text="$store.loc.pageRooms.actions.join.roomId"
                  )
                .mb-3
                  input.field(
                    type="password",
                    placeholder=" ",
                    x-model="password",
                    :id="$id('password')"
                  )
                  label(
                    :for="$id('password')",
                    x-text="$store.loc.pageRooms.actions.join.password"
                  )

                button.btn.btn-warning.w-100(
                  type="submit",
                  :disabled="isLoading || password?.length <= 4 || !roomId",
                  x-text="$store.loc.pageRooms.actions.join.submit"
                )
          .col-auto.ps-0
            .dropdown
              button.btn.btn-warning.btn-sm.fw-bold(
                type="button",
                data-bs-toggle="dropdown",
                aria-expanded="false",
                data-bs-auto-close="outside",
                x-html="$store.loc.pageRooms.actions.create.button"
              )
              form.dropdown-menu.p-3.mt-1.shadow-lg.bg-warning-subtle.bg-gradient(
                style="width: 300px",
                x-data="createRoom",
                x-id="['type', 'password']",
                @submit.prevent="createRoom()"
              )
                h5.mb-2(x-text="$store.loc.pageRooms.actions.create.title")
                .mb-3
                  label.form-label(
                    :for="$id('speed')",
                    x-text="$store.loc.pageRooms.actions.create.difficulty.name"
                  )
                  .btn-group.w-100(
                    role="group",
                    aria-label="Базовая группа переключателей радио",
                    x-id="['easy', 'medium', 'hard']"
                  )
                    input.btn-check(
                      type="radio",
                      autocomplete="off",
                      x-model="speed",
                      value="2",
                      :id="$id('easy')"
                    )
                    label.btn.btn-sm.btn-outline-warning(
                      :for="$id('easy')",
                      x-text="$store.loc.pageRooms.actions.create.difficulty.easy"
                    )
                    input.btn-check(
                      type="radio",
                      autocomplete="off",
                      x-model="speed",
                      value="3",
                      :id="$id('medium')"
                    )
                    label.btn.btn-sm.btn-outline-warning(
                      :for="$id('medium')",
                      x-text="$store.loc.pageRooms.actions.create.difficulty.medium"
                    )
                    input.btn-check(
                      type="radio",
                      autocomplete="off",
                      x-model="speed",
                      value="4",
                      :id="$id('hard')"
                    )
                    label.btn.btn-sm.btn-outline-warning(
                      :for="$id('hard')",
                      x-text="$store.loc.pageRooms.actions.create.difficulty.hard"
                    )
                .mb-3
                  .form-check.form-switch
                    input.form-check-input.checkbox-warning(
                      type="checkbox",
                      role="switch",
                      x-model="type",
                      :id="$id('type')"
                    )
                    label.form-check-label(
                      :for="$id('type')",
                      x-text="$store.loc.pageRooms.actions.create.includePassword"
                    )
                .mb-3(:class="{ 'd-none': !type }")
                  input.field(
                    type="password",
                    placeholder=" ",
                    x-model="password",
                    :id="$id('password')"
                  )
                  label(
                    :for="$id('password')",
                    x-text="$store.loc.pageRooms.actions.create.password"
                  )

                button.btn.btn-warning.w-100(
                  type="submit",
                  :disabled="isLoading || (type && password?.length <= 4)",
                  x-text="$store.loc.pageRooms.actions.create.submit"
                )

        .row.mt-3
          .col
            .list-group.overflow-hidden
              template(:key="room.id", x-data="selectRoom")&attributes({"x-for": "room in rooms"})
                button.list-group-item.list-group-item-warning.list-group-item-action.d-flex.justify-content-between.align-items-center(
                  x-data="{ hover: false }",
                  @click="selectRoom(room.id)",
                  :disabled="isLoading",
                  :class="{ active: hover, 'bg-transparent': !hover }",
                  @mouseover="hover = true",
                  @mouseout="hover = false"
                )
                  .ms-2.me-auto.d-flex.flex-column.row-gap-2.w-75
                    .fw-bold.text-truncate(x-text="`ID: ${room.id}`")
                    .progress(role="progressbar")
                      .progress-bar.overflow-visible.bg-success.progress-bar-striped.progress-bar-animated(
                        :style="`width: calc(${room.botsCount} / 5 * 100%)`",
                        x-text="`${room.botsCount}/5`"
                      )

                  span.badge.bg-success.rounded-pill(
                    x-text="$store.loc.badges[room.speed === 2 ? 'easy' : room.speed === 3 ? 'medium' : 'hard']",
                    :class="{ 'bg-success': room.speed === 2, 'bg-warning': room.speed === 3, 'bg-danger': room.speed === 4 }"
                  )
        .row.mt-3
          .col
            a.btn.btn-sm.w-100(
              x-link,
              href="/",
              x-text="$store.loc.buttons.back"
            )
