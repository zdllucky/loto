FROM node:16-alpine AS build

WORKDIR /app

COPY client .

RUN npm install --registry http://localhost:4873

RUN npm run build

FROM caddy:2-alpine AS release

COPY --from=build /app/dist /usr/share/caddy
